<% if current_user.steam_accounts.present? %>
   <table id="balancePartialDataTable" class="display shadow-md rounded-lg" style="width:100%; border: none;">
      <% if current_user.active_steam_account.present? %>
         <% @steam_account ||= current_user.active_steam_account %>
      <thead class="bg-blue text-white">
         <tr>
               <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2 rounded-tl-lg">Steam ID</th>
               <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2">Name</th>
               <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2">CSGOEmpire Balance</th>
               <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2 ">Market.CSGO Balance</th>
               <th class=" text-sm px-4 py-2 rounded-tr-lg ">Waxpeer Balance</th>
         </tr>
      </thead>
      <tbody>
            <tr>
               <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= @steam_account.steam_id %></td>
               <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= @steam_account.unique_name %></td>
               <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= @steam_account.csgoempire_api_key.present? ? "#{@csgo_empire_balance} coins" : "--" %></td>
               <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= @steam_account.market_csgo_api_key.present? ? "$ #{@csgo_market_balance}" : "--" %></td>
               <td class=" text-sm text-center px-4 py-2"><%= @steam_account.waxpeer_api_key.present? ? "$ #{@waxpeer_balance}" : "--" %></td>
            </tr>
      <% else %>
         <thead class="bg-blue text-white">
            <tr>
                  <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2 rounded-tl-lg">Steam ID</th>
                  <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2">Name</th>
                  <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2">CSGOEmpire Balance</th>
                  <th class="border-r border-r-[#acadaf9c] text-sm px-4 py-2 ">Market.CSGO Balance</th>
                  <th class=" text-sm px-4 py-2 rounded-tr-lg ">Waxpeer Balance</th>
            </tr>
         </thead>
         <tbody>
            <% @balance_data.each do |account| %>
                  <tr>
                     <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= account[:steam_id] %></td>
                     <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= account[:account_name] %></td>
                     <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= account[:csgo_empire_balance].present? ? "#{account[:csgo_empire_balance]}" : "--" %></td>
                     <td class="border-r border-r-[#acadaf9c] text-sm text-center px-4 py-2"><%= account[:csgo_market_balance].present? ? "$#{account[:csgo_market_balance]}" : "--" %></td>
                     <td class=" text-sm text-center px-4 py-2"><%= account[:waxpeer_balance].present? ? "$#{account[:waxpeer_balance]}" : "--" %></td>
                  </tr>
            <% end %>
         </tbody>
      <% end %>
   </table>
<% else %>
  <div class="flex items-center justify-center gap-5" id="balance-container">
    <h1 class="text-xl text-blue dark:text-white font-[500]">No steam account present</h1>
  </div>
<% end %>

<script>
   $(document).ready(function() {
      $('#balancePartialDataTable').DataTable({
         paging: false,
         label: false,
         language: {
         search: "_INPUT_",
         searchPlaceholder: "Search...",
         } // Number of records per page
         // Other DataTables options...
      });

      const searchInputs = document.querySelectorAll('input[type="search"]');
      searchInputs.forEach(function(input) {
         input.style.marginBottom = '10px'
      });

      var elements = document.querySelectorAll('.dataTables_length');
      for (var i = 0; i < elements.length; i++) {
         elements[i].parentNode.removeChild(elements[i]);
      }
   });
</script>